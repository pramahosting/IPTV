<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PRAMA IPTV PLAYLIST</title>
<style>
  /* Your existing styles here */
</style>
</head>
<body>
<header>PRAMA IPTV PLAYLIST</header>
<div class="main">
  <div class="sidebar">
    <input type="text" id="search" placeholder="Search channels..." />
    <div id="Entertainment"><h2>ğŸ¨ Entertainment</h2><div class="list"></div></div>
    <div id="News"><h2>ğŸ“° News</h2><div class="list"></div></div>
    <div id="Spiritual"><h2>ğŸ•‰ï¸ Spiritual</h2><div class="list"></div></div>
  </div>
  <div class="player">
    <div id="playerTitle" class="loading" style="display:block">Select a channel to view</div>
    <div id="iframe-loading-msg" class="loading">Loading channel...</div>
    <iframe id="channel-frame" allowfullscreen sandbox="allow-scripts allow-same-origin allow-forms allow-popups"></iframe>
    <div id="overlay-blocker"></div>
  </div>
</div>

<script>
const playlist = [
  { name: "YoMovies", url: "https://yomovies.design/" },
  { name: "PlayDesi", url: "https://playdesi.info/" },
  { name: "Abzy TV", url: "https://abzy.com" },
  { name: "Geo TV", url: "https://www.harpalgeo.tv/" },
  { name: "ARY Zindagi TV", url: "https://www.aryzindagi.tv/" },
  { name: "Hum TV", url: "https://hum.tv/" },
  { name: "YuppTV", url: "https://www.yupptv.com/fast-tv" },
  { name: "Dunya News", url: "https://dunyanews.tv/live/" },
  { name: "Geo News", url: "https://live.geo.tv/" },
  { name: "Aastha TV", url: "https://www.aasthatv.tv/" },
  { name: "Einthusan", url: "https://einthusan.tv/launcher/?lang=hindi" }
];

const keywords = {
  Entertainment: ["movie", "drama", "desi", "geo tv", "zindagi", "hum", "abzy", "playdesi", "einthusan"],
  News: ["news", "aajtak", "abp", "al jazeera", "geo news", "dunya", "times now", "yupp"],
  Spiritual: ["sansk", "aastha", "sadhna", "om", "ram", "bhakti"]
};

const groups = {
  Entertainment: document.querySelector("#Entertainment .list"),
  News: document.querySelector("#News .list"),
  Spiritual: document.querySelector("#Spiritual .list")
};

function classify(name) {
  const nameLC = name.toLowerCase();
  for (const [group, keys] of Object.entries(keywords)) {
    if (keys.some(k => nameLC.includes(k))) return group;
  }
  return "Entertainment";
}

function renderChannels(channels) {
  Object.values(groups).forEach(div => div.innerHTML = "");
  channels.forEach(({ name, url }) => {
    const group = classify(name);
    const el = document.createElement("div");
    el.className = "channel";
    el.textContent = name;
    el.dataset.name = name;
    el.dataset.url = url;
    el.addEventListener("click", () => playChannel(name, url));
    groups[group]?.appendChild(el);
  });

  document.getElementById("search").addEventListener("input", (e) => {
    const term = e.target.value.toLowerCase();
    document.querySelectorAll(".channel").forEach(c => {
      c.style.display = c.dataset.name.toLowerCase().includes(term) ? "" : "none";
    });
  });
}

function playChannel(name, url) {
  const frame = document.getElementById("channel-frame");
  const title = document.getElementById("playerTitle");
  const loadingMsg = document.getElementById("iframe-loading-msg");
  const nameLC = name.toLowerCase();

  title.textContent = `Now Viewing: ${name}`;

  // Open these in new tab due to iframe restrictions
  const newTabOnly = ["yomovies", "einthusan"];
  if (newTabOnly.some(sub => nameLC.includes(sub))) {
    window.open(url, "_blank");
    frame.srcdoc = `
      <div style="display:flex; align-items:center; justify-content:center; height:100%; font-size:1.2rem; color:#2c3e50;">
        <strong>${name} is Playing in Another Tab</strong>
      </div>`;
    return;
  }

  // For ABZY TV, load normally, but YouTube links inside iframe will open in new tab (no direct control possible cross-origin)
  frame.removeAttribute("srcdoc");
  loadingMsg.style.display = "block";
  frame.onload = () => {
    loadingMsg.style.display = "none";
  };
  frame.src = url;
}

// Just a reminder for YouTube links inside ABZY:
const playerTitle = document.getElementById("playerTitle");
playerTitle.insertAdjacentHTML('afterend', `
  <div style="font-size:0.9rem; color:#666; margin: 0.5rem 1rem;">
    Tip: To watch YouTube videos inside ABZY without issues, right-click the video link and select 'Open in new tab'.
  </div>
`);

renderChannels(playlist);
</script>
</body>
</html>


